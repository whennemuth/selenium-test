<form name="configfrm" action="" method="post" novalidate>
<div class=floatingbox>
	<div class=sectionlabel>Environments</div>
	<div class=sectionarea>
		<div class=fieldlabel>Servers</div>
		<div>
			<select 
				required
				name="server" 
				size="5" 
				style="width:180px;"
				ng-change="setConfig();"
				ng-model="config.currentEnvironment"
				ng-options="environment.name 
							for environment in config.configEnvironments 
							track by environment.url">
			</select>
		</div>
		<div class=fieldlabel>Name</div>
		<div>
			<input 
				required 
				name="servername" 
				type='text' 
				ng-model="config.currentEnvironment.name" >
		</div>
		<div class=fieldlabel>URL</div>
		<div>
			<input 
				required 
				name="serverurl" 
				type='text' 
				ng-model="config.currentEnvironment.url">
		</div>
		<div align=right style='margin: 5px;'>
			<input 
				type='button' 
				value=' Add/Edit ' 
				style='padding:5px;'
				ng-disabled="configfrm.servername.$error.required || 
							 configfrm.serverurl.$error.required"
				ng-click="setConfig('addserver');">
				
			<input 
				type='button' 
				value=' Remove ' 
				style='padding:5px;'
				ng-disabled="configfrm.server.$error.required" 
				ng-click="setConfig('removeserver');">
		</div>
	</div>
</div>

<div class="floatingbox width300">
	<div class=sectionlabel>Head selection</div>
	<div class=sectionarea>
		<div class="fieldlabel"><input 
			name="browser" 
			type='radio'
			ng-model="config.headless"
			ng-value="false"
			ng-click="setConfig();">Use Browser</div>
		<div class="fieldlabel"><input 
			name="browser" 
			type='radio'
			ng-model="config.headless"
			ng-value="true"
			ng-click="setConfig();">Headless Mode</div>
	</div>
	<div class=sectionlabel>Module definitions</div>
	<div class=sectionarea>
		<div ng-repeat="m in config.configModules" style="padding-top:5px">
			<input id="configModule{{$index}}" type="checkbox"> 
			<input type="text" style="width:100px" value="{{m.label}}"> 
	    	<input type="button" value="add" ng-click="config.configModules.splice($index+1, 0, getBlankConfigModule());">		    
			<input type="button" value="remove" ng-click="config.configModules.splice($index, 1);">
			<div ng-repeat="t in m.configTabs" style="padding-left:50px" ng-show="angular.element('configModule'+$parent.$index).attr('checked')">
				<input type="text" style="width:100px" value="{{t.label}}"> 
	    		<input type="button" value="add" ng-click="config.configModules.splice($index+1, 0, getBlankConfigModule().configTabs[0]);">		    
				<input type="button" value="remove" ng-click="t.configTabs.splice($index, 1);">
			</div>
		</div>
	</div>
</div>

<div style="padding: 20px; float:left; clear:both; font: normal normal 10px arial;">
	last updated: 
	{{config.lastUpdated}}
</div>
</form>